#config
hostname: {{ item.hostname }}
manage_etc_hosts: true

users:
  - name: rocky
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: users, wheel
    lock_passwd: false
    plain_text_passwd: "{{ item.password | default('Rocky_Balb0a') }}"
    ssh_authorized_keys:
{% for k in (rocky_pubkeys | default([])) %}
      - {{ k }}
{% endfor %}

  - name: ansible_master
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: users, wheel
    shell: /bin/bash
    lock_passwd: true
    ssh_authorized_keys:
{% for k in (ansible_master_pubkeys | default([])) %}
      - {{ k }}
{% endfor %}

ssh_pwauth: false
disable_root: true

#
#network:
#  version: 2
#  renderer: NetworkManager
#  ethernets:
#    nic0:
#      match:
#        macaddress: "{{ item.mac }}"
#      set-name: eth0
#      dhcp4: false
#      addresses: [{{ item.ip_cidr }}]
#      gateway4: {{ item.gateway }}
#      nameservers:
#        addresses: [{% for d in item.dns_servers %}{{ d }}{% if not loop.last %}, {% endif %}{% endfor %}]
